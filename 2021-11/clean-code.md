## Clean Code

<b>Back to [Homepage](../index.md)</b>

## 序

那班求索者多年来并肩奋斗，不但是为求一己之进步，更将他们的知识通过和你手上正在做的事一般的工作贡献给这个行业。

## 代码猴子与童子军军规

宏大建筑中最细小的部分，比如关不紧的门、有点儿没铺平的地板，甚至是凌乱的桌面，都会将整个大局的魅力毁灭殆尽。

写整洁代码，需要遵循大量的小技巧，贯彻刻苦习得的‘整洁感’。这种‘代码感’就是关键所在……

## 前言

穷尽应知之事，并且要对其了如指掌，通过刻苦实践掌握它。

本书要让你用功，而且是非常用功。如何用功？阅读代码——大量代码。而且你要去琢磨某段代码好在什么地方、坏在什么地方。

## 第1章 整洁代码

我们永远抛不掉代码，因为代码呈现了需求的细节。

归置良好的需求就像代码一样正式，也能作为代码的可执行测试来使用。

Later equals never.

混乱的代码是祸首。

做得快的唯一方法是保持代码整洁。

代码逻辑应当直截了当，叫缺陷难以隐藏。

尽量减少依赖关系，使之便于维护。

依据某种分层战略完善错误处理代码。

整洁的代码读起来令人愉悦。

完善错误处理代码。

整洁的代码只做好一件事。

整洁的代码从不隐藏设计者的意图。

整洁的代码总是看起来像是某位特别在意它的人写的。

没有重复代码。

体现系统中的全部设计理念。

包括尽量少的实体，比如类、方法、函数等。

有意义的命名是体现表达力的一种方式。

消除重复代码，提高表达力，提早构建简单抽象。

不要重复代码，只做一件事，表达力，小规模抽象。

每个例程都让你感到深合己意。

那代码就是深合你意。它明确、简单、有力。

整洁的程序好到你根本不会注意到它。

读与写花费时间的比例超过10:1。

"让营地比你来时更干净。"

艺术书并不保证你读过之后才能成为艺术家，只能告诉你其他艺术家用过的工具、技术和思维过程。

若我们受人所制，亲爱的勃鲁托斯，那错也在我们身上，不能怪罪命运。

## 第2章 有意义的命名

名副其实。

如果名称需要注释来补充，那就不算是名副其实。

选择体现本意的名称能让人梗荣立理解和修改代码。

问题不在于代码的简洁度，而是在于代码的模糊度：即上下文在代码中未被明确体现的程度。

只要简单改一下名称，就能轻易知道发生了什么。

以同样的方式拼写出同样的概念才是信息。瓶邪前后不一致就是误导。

如果名称必须相异，那其意思也应该不同才对。

废话是另一种没意义的区分。废话都是冗余。

要区分名称，就要以读者能鉴别之处的方式来区分。

使用读得出来的名称，如果名称读不出来，讨论的时候就会像个傻鸟。

单字母名称仅用于短方法中的本地变量。名称长短应与其作用于大小相对应。

长名称胜于短名称，搜得到的名称胜于用自造代码写就的名称。

把类型或作用于编进名称里面，徒然增加了解码的负担。

应当把类和函数做得足够小，消除对成员前缀的需要。

聪明程序员和专业程序员之间的区别在于，专业程序员了解，明确是王道。专业程序员善用其能，编写其他人能理解的代码。

类名和对象名应该是名词或名词短语，类名不应当是动词。

方法名应当是动词或动词短语，属性访问器、修改器和断言应该根据其值命名，并依Javabean标准加上get、set和is前缀。

重载构造器时，使用描述了参数的静态工厂方法名。可以考虑将相应的构造器设置为private，强制使用这种命名手段。

    Complex.FromRealNumber(23.0) 通常好于 new Complex(23.0)

宁可明确，毋为好玩。言到意到，意到言到。

给每个抽象概念选一个词，并且一以贯之。

    例如，使用fetch、retrieve和get来给多个类中的同种方法命名。

函数名称应当独一无二，而且要保持一致，这样才能不借助多余的浏览就找到正确的方法。

避免将同一单词用于不同目的。遵循"一词一意"。

代码作者应尽力写出易于理解的代码。

使用解决方案领域名称。

使用源自所涉问题领域的名称。

    优秀的程序员和设计师，其工作之一就是分离解决方案领域和问题领域的概念。

添加有意义的语境。

只要短名称足够清楚，就要比长名称好。别给名称添加不必要的语境。

    精确是命名的要点。

取好名字最难的地方在于需要良好的描述技巧和共有文化背景。

## 第3章 函数

函数的第一规则是要短小。函数的缩进层级不该多于一层或两层。

函数只做一件事。只做一件事的函数无法再被切分为多个区段。

    编写函数是为了把大一些的概念拆分为另一抽象层上的一系列步骤。
    换言之，函数应该只在紧邻的两个抽象层次上拆解，而不应该跨越多个抽象层次。

每个函数一个抽象层级。

自顶向下阅读代码：向下规则。

Switch语句天生要做N件事，写出短小的switch语句很难。

    switch语句尽量只出现于工厂方法中用于创建多态对象，而且隐藏在某个继承关系中，在系统的其他部分看不到。

长而具有描述性的名称，要比短而令人费解的名称好。

函数参数越少越好。

    参数与函数名处在不同的抽象层级，它要求你了解目前并不特别重要的细节。

单参数函数可能是操作该参数，将其转换再输出；也有可能是将参数视为事件（event），有输入而无输出，此时函数使用该参数修改系统状态。

不要使用标识参数，标识参数丑陋不堪，它是在宣布本函数不止做一件事。

如果函数需要三个或以上的参数，就说明其中一些参数应该封装为类了。

    一组参数被统统传递，往往就是该有自己名称的某个概念的一部分。

给函数取个好名字，能较好地解释函数的意图，以及参数的顺序和意图。

    函数和参数应当形成一种非常良好的动词/名词对形式。

无副作用：函数承诺只做一件事。

    应避免使用输出参数，如果必须要修改某种状态，就修改所属对象的对象。

分隔指令与询问

    函数要么做什么事，要么回答什么事，但二者不可兼得。

使用异常替代返回错误码：错误处理代码就能从主路径中分离出来，得到简化。

抽离Try/Catch代码块，另外形成函数，分离Control和具体Logic。

函数应该只做一件事，错误处理就是一件事，因此，处理错误的函数不该做其他事。

使用异常代替错误码，新异常就可以从异常类派生出来，无需重新编译或重新部署。

Don't repeat yourself.

    重复可能是软件中一切邪恶的根源。许多原则与实践规则都是为控制与消除重复而创建。

> 每个系统都是使用某种领域特定语言搭建，而这种语言是程序员设计来描述那个系统的。
> 
> 函数是语言的动词，类是名词。
> 
> 编程艺术是且一直就是语言设计的艺术。
> 大师级程序员把系统当做故事来讲，而不是当做程序来写。
> 
> 真正的目标在于讲述系统的故事，而你编写的函数必须干净利落地拼装到一起，形成一种精确而清晰的语言，帮助你讲故事。

## 第4章 注释

若编程语言足够有表达力，或者我们擅长用这些语言来表达意图，就不那么需要注释——也许根本不需要。

注释的恰当用法是弥补我们在用代码表达意图时遭遇的失败。

代码在变动，在演化，程序员不能坚持维护注释，注释并不总是随之变动。

不准确的注释要比没注释坏得多。

只有代码能忠实地告诉你它做的事。那是唯一真正准确的信息来源。

注释不能美化糟糕的代码。尽量用代码来阐释意图而不是注释。

唯一真正好的注释是你想办法不去写的注释。

有时，注释把某些晦涩难明的参数或返回值的意义翻译为某种可读形式，也会是有用的。

有时，用于警告其他程序员会出现某种后果的注释也是有用的。

注释可以用来放大某种看来不合理之物的重要性。

没有什么比被良好描述的公共API更有用和令人满意的了。

怀注释都是糟糕的代码的支撑或借口，或者对错误决策的修正，基本上等于程序员自说自话。

如果你决定写注释，就要花必要的时间确保写出最好的注释。

程序员的挫败感可以由改进代码结构而消除。

用整理代码的决心来代替创造废话的冲动吧。你会发现自己成为更优秀、更快乐的程序员。

能用函数或变量时就别用注释。

假如你一定要写注释，请确保它描述了离它最近的代码。

别在注释中添加过多或无关的细节描述。

注释及其描述的代码之间的联系应该显而易见。

为只做一件事的短函数选个好名字，通常要比写函数头注释要好。

## 第5章 格式



































